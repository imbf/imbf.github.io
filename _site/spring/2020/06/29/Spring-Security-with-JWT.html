<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="B7c_ecRqLF3-nPb0TKaSDlu3xHPQXRZkwl-UcutOMgo" />


  <title>Spring Security + JWT를 통해 프로젝트에 인증 구현하기</title>
  <meta name="description" content="Spring Security와 JWT를 활용해서 프로젝트에 인증을 어떻게 구현했는지에 대해서 포스팅 하려고 한다.">
  
  <meta name="author" content="배종진">
  <meta name="copyright" content="&copy; 배종진 2020">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Spring Security와 JWT를 활용해서 프로젝트에 인증을 어떻게 구현했는지에 대해서 포스팅 하려고 한다." />
  <meta property="og:url" content="http://localhost:4000/spring/2020/06/29/Spring-Security-with-JWT.html">
  <meta property="og:site_name" content="Green Frog Developer" />
  <meta property="og:title" content="Spring Security + JWT를 통해 프로젝트에 인증 구현하기" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Spring Security + JWT를 통해 프로젝트에 인증 구현하기">
  <meta name="twitter:description" content="Spring Security와 JWT를 활용해서 프로젝트에 인증을 어떻게 구현했는지에 대해서 포스팅 하려고 한다.">
  <meta name="twitter:image" content="http://localhost:4000/assets/logo.png">
  <meta name="twitter:url" content="http://localhost:4000/spring/2020/06/29/Spring-Security-with-JWT.html">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/spring/2020/06/29/Spring-Security-with-JWT.html">
	<link rel="alternate" type="application/rss+xml" title="Green Frog Developer" href="http://localhost:4000/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Green Frog Developer">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	
	<li class="nav-link"><a href="/typography/">Typography</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">Spring Security + JWT를 통해 프로젝트에 인증 구현하기</h1>
      <p class="info">by <strong>Green Frog Developer</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">June 29, 2020</div>
  <div class="post-categories">
  in 
    
    <!-- <a href="/category/Spring">Spring</a> (default) -->
    <a href="/category/Spring">Spring</a>
    
  
  </div>
</section>

<article class="post-content">
  <p>Spring Security와 JWT를 활용해서 프로젝트에 인증을 어떻게 구현했는지에 대해서 포스팅 하려고 한다.</p>

<p>토큰을 사용한 인증은 처음이기도 하고, Google OAuth를 함께 사용하는 바람에… 개념이 해깔려 며칠간 계속 헤맸던 것 같다.</p>

<p>이제서야 조금 감을 잡으며 프로젝트에 인증 구현을 마쳤는데.. 아직 구현되지 않은 기능들이 매우 많다 ㅎㅎ 빨리 구현하고 싶다!!!</p>

<p><strong>서론이 길었다!!! 지금부터 Spring Security란 무엇이고, Spring Security와 JWT를 사용해서 어떻게 인증을 구현했는지에 대해서 포스팅 하겠다.</strong></p>

<hr />

<h2 id="spring-security란">Spring Security란?</h2>

<hr />

<p><strong>Spring Security란 인증과, 권한부여, 일반적인 공격에 대한 보호의 기능을 제공하는 프레임워크이다.</strong> 즉, Spring Security를 사용하면 어플리케이션의 보안 관련 기능을 자체적으로 구현 할 필요 없이 쉽고 안전하게 구현할 수 있다.</p>

<p>Spring Security의 Servlet 보안 지원은 <strong>Servlet Filter(이하 Filter)</strong>를 기반으로 한다. 클라이언트가 어플리케이션으로 request를 보내면, Container는 요청 URI의 경로에 따라 어떤 Filter와 어떤 Servlet을 적용할 것인지 결정한다.</p>

<p>Spring은 여러 Filter중 Servlet Container Lifecycle과 ApplicationContext사이에 연결할 수 있는 <code class="highlighter-rouge">DelegatingFilterProxy</code>라는 Filter를 제공한다.</p>

<p>Spring Security의 Servlet 보안 지원은 <code class="highlighter-rouge">DelegatingFilterProxy</code>가 감싸고 있는 <strong><code class="highlighter-rouge">FilterChainProxy</code></strong>에 의해 수행되며, <code class="highlighter-rouge">FilterChainproxy</code>는 <strong><code class="highlighter-rouge">SecurityFilterChain</code></strong>을 통해 많은 작업을 <strong>Security Filter</strong> 인스턴스에 위임한다.</p>

<p>위 과정을 그림으로 나타내면 다음과 같다.</p>

<p><img src="/assets/spring/Spring-Security-With-JWT-1.png" style="width:70%" /></p>

<p>SecurityFilterChain은 스프링에서 보안과 관련된 여러 Security Filter List를 갖고 있는 객체로 이를 순회하면서 필터링을 실시한다.</p>

<p>SecurityFilterChain에 존재하는 Security Filter순서는 다음과 같다.</p>

<ol>
  <li>ChannelProcessingFilter</li>
  <li>ConcurrentSessionFilter</li>
  <li>WebAsyncManageIntegrationFilter</li>
  <li>SecurityContextPersistenceFilter</li>
  <li>HeaderWriterFilter</li>
  <li>CorsFilter</li>
  <li>CsrfFilter</li>
  <li>LogoutFilter</li>
  <li>OAuth2AuthorizationRequestRedirectFilter</li>
  <li>Saml2WebSsoAuthenticationRequestFilter</li>
  <li>X509AuthenticationFilter</li>
  <li>AbstractPreAuthenticatedProcessingFilter</li>
  <li>CasAuthenticationFilter</li>
  <li>OAuth2LoginAuthenticationFilter</li>
  <li>Saml2WebSsoAuthenticationFilter</li>
  <li><strong>UsernamePasswordAuthenticationFilter</strong></li>
  <li>ConcurrentSessionFilter</li>
</ol>

<p><strong>… (총 33개의 Spring Security Filter가 존재한다.)</strong></p>

<p>위의 Security Filter중 <strong>Security Authentication Filter</strong>(UsernamePasswordAuthentication, OAuth2LoginAuthenticationFilter와 같은 인증 필터)는 <code class="highlighter-rouge">AuthenticationManager</code>를 통해 인증을 수행한다.</p>

<p><code class="highlighter-rouge">AuthenticationManager</code>는 Spring Security의 <strong>필터들이 인증을 수행하는 방법에 대한 명세</strong>를 정의해 놓은 인터페이스이다.</p>

<p>이 <code class="highlighter-rouge">AuthenticationManager</code>는 일반적으로 <strong><code class="highlighter-rouge">ProviderManager</code></strong>로 구현되며, <code class="highlighter-rouge">ProviderManager</code>는 여러 <strong><code class="highlighter-rouge">AuthenticationProvider</code></strong>에 인증을 위임한다.</p>

<p><strong>여러 <code class="highlighter-rouge">AuthenticationProvider</code>중 하나라도 인증에 성공한다면 <code class="highlighter-rouge">ProviderManager</code>에게 인증된 <code class="highlighter-rouge">Authentication</code>객체를 반환하고 이는 event 기반으로 <code class="highlighter-rouge">AuthenticationFilter</code>에 전송된다.</strong></p>

<p><code class="highlighter-rouge">ProviderManager</code>에 설정된 <code class="highlighter-rouge">AuthenticationProvider</code>중 어느 것도 성공적으로 인증을 수행할 수 없다면, 인증은 실패할 것이고 알맞는 예외가 <code class="highlighter-rouge">ProviderManager</code>에게 건내질 것이다.</p>

<p><strong>인증이 성공할 경우 <code class="highlighter-rouge">AuthenticationFilter</code>는 <code class="highlighter-rouge">SecuritycontextHolder</code>의 <code class="highlighter-rouge">SecurityContext</code>에 인증된 Authentication 객체를 저장할 수 있도록 한다.</strong></p>

<h3 id="아래의-그림은-username-and-password-인증-방식의-아키텍처이다">아래의 그림은 Username and Password 인증 방식의 아키텍처이다.</h3>

<p><img src="/assets/spring/Spring-Security-With-JWT-2.png" style="width:100%" /></p>

<p>위 그림의 <code class="highlighter-rouge">AuthenticationFilter</code>의 역할은 <code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code>가 수행하고 <strong>전체적인 프로세스</strong>는 다음과 같다.</p>

<ol>
  <li>
    <p>Client가 어플리케이션에 요청을 보내면, Servlet Filter에 의해서 Security Filter로 Security 작업이 위임되고 여러 Security Filter 중에서 <code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code><strong>(Username and Password Authentication 방식에서 사용하는 AuthenticationFilter)</strong>에서 <strong>인증</strong>을 처리한다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthenticationFilter</code><strong>(UsernamePasswordAuthenticationFilter인데 지금부터 AuthenticationFilter라고 부름)</strong>는 Servlet 요청 객체(HttpServletRequest)에서 username과 password를 추출해 <code class="highlighter-rouge">UsernameAuthenticationToken</code><strong>(이하 인증 객체)</strong>을 생성한다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthenticationFilter</code>는 <code class="highlighter-rouge">AuthenticationManager</code><strong>(구현체 : ProviderManager)</strong>에게 인증 객체를 전달한다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">ProviderManager</code>는 인증을 위해 <code class="highlighter-rouge">AuthenticationProvider</code>에게 인증 객체를 전달한다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthenticationProvider</code>는 전달받은 인증 객체의 정보(일반적으로 사용자 아이디)를 <code class="highlighter-rouge">UserDetailsService</code>에 넘겨준다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">UserDetailsService</code>는 전달 받은 사용자 정보를 통해 DB에서 알맞는 사용자를 찾고 이를 기반으로 <code class="highlighter-rouge">UserDetails</code>객체를 만듭니다.</p>
  </li>
  <li>
    <p>사용자 정보와 일치하는 <code class="highlighter-rouge">UserDetails</code>객체를 <code class="highlighter-rouge">AuthenticationProvider</code>에 전달합니다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthenticationProvider</code>은 전달받은 <code class="highlighter-rouge">UserDetails</code>를 인증해 성공하면 <code class="highlighter-rouge">ProviderManager</code>에게 권한(Authorities)을 담은 검증된 인증 객체를 전달합니다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">ProviderManager</code>는 검증된 인증 객체를 <code class="highlighter-rouge">AuthenticationFilter</code>에게 전달합니다. <strong>(event 기반 으로 전달)</strong></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthenticationFilter</code>는 검증된 인증 객체를 <code class="highlighter-rouge">SecurityContextHolder</code>의 <code class="highlighter-rouge">SecurityContext</code>에 저장합니다.</p>
  </li>
</ol>

<p>Spring Security 전체를 설명하기에는 하나의 포스팅으로 부족하기 때문에 아주 기본적인 프로세스만 설명했고, 이제 메인 주제인 <strong>나의 프로젝트에 어떻게 Spring Security + JWT를 적용</strong>했는지에 대해서 알아보도록 하겠다.</p>

<hr />

<h2 id="spring-security--jwt를-프로젝트에-어떻게-적용-했는가">Spring Security + JWT를 프로젝트에 어떻게 적용 했는가?</h2>

<hr />

<p>클라이언트가 Spring Security를 적용한 어플리케이션에 리소스를 요청할 때 접근 권한이 없는 경우 기본적으로 <strong>Username and Password Authentication Mechanism</strong>을 사용해 <strong>로그인 폼</strong>으로 보내지게 되는데 그 역할을 하는 필터는 <code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code>이다.</p>

<p>내가 개발하고 있는 Rest API Server는 <strong>Username and Password Authentication Mechanism</strong>을 사용하지 않을 것이기 때문에 <code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code>이전에 사용자 정의 필터인 <code class="highlighter-rouge">JwtAuthenticationFilter</code>에서 인증 및 권한처리가 필요했다.</p>

<p>그래서 <strong><code class="highlighter-rouge">JwtAuthenticationFilter</code></strong>를 다음과 같이 만들어서 <strong><code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code></strong>이전에 등록했다.</p>

<p><strong>JwtAuthenticationFilter.java</strong> : Jwt가 유효한 토큰인지 인증하기 위한 Filter이다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtAuthenticationFilter</span> <span class="kd">extends</span> <span class="nc">GenericFilterBean</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">JwtTokenProvider</span> <span class="n">jwtTokenProvider</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JwtAuthenticationFilter</span><span class="o">(</span><span class="nc">JwtTokenProvider</span> <span class="n">jwtTokenProvider</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jwtTokenProvider</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Request로 들어오는 Jwt Token의 유효성을 검증하는 filter를 filterChain에 등록합니다.</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">servletRequest</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">servletResponse</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">filterChain</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">resolveToken</span><span class="o">((</span><span class="nc">HttpServletRequest</span><span class="o">)</span> <span class="n">servletRequest</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">token</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">token</span><span class="o">))</span> <span class="o">{</span>   <span class="c1">// token 검증</span>
            <span class="nc">Authentication</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">getAuthentication</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>    <span class="c1">// 인증 객체 생성</span>
            <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">auth</span><span class="o">);</span> <span class="c1">// SecurityContextHolder에 인증 객체 저장</span>
        <span class="o">}</span>
        <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">servletRequest</span><span class="o">,</span> <span class="n">servletResponse</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Spring Security Filter와 통합하지 않고 <strong>사용자가 정의한 필터(JwtAuthenticationFilter)에서 인증 및 권한 작업을 진행</strong>할 것이기 때문에 <code class="highlighter-rouge">AuthenticationManager</code>를 사용하지 않고 <code class="highlighter-rouge">JwtTokenProvider</code>를 통해서 인증 후 <code class="highlighter-rouge">SecurityContextHolder</code>를 바로 사용했다.</p>

<blockquote>
  <p><strong>Spring Security Document의 관련 글</strong></p>

  <p>If you are not integrating with Spring Security’s Filters you can set the SecurityContextHolder directly and are not required to use an AuthenticationManager.</p>
</blockquote>

<p>다음으로는 생성한 <code class="highlighter-rouge">JwtAuthenticationFilter</code>를 Spring Security의 <code class="highlighter-rouge">UsernamePasswordAuthenticationFilter</code><strong>이전에 등록하는 설정</strong>을 할 것이다.</p>

<p><strong>SecurityConfig.java</strong> : Spring Security 관련 설정들을 하는 Configuration 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="kd">extends</span> <span class="nc">WebSecurityConfigurerAdapter</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JwtTokenProvider</span> <span class="n">jwtTokenProvider</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SecurityConfig</span><span class="o">(</span><span class="nc">JwtTokenProvider</span> <span class="n">jwtTokenProvider</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jwtTokenProvider</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">AuthenticationManager</span> <span class="nf">authenticationManagerBean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">authenticationManagerBean</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">http</span>
                <span class="o">.</span><span class="na">httpBasic</span><span class="o">().</span><span class="na">disable</span><span class="o">()</span>
                <span class="o">.</span><span class="na">csrf</span><span class="o">().</span><span class="na">disable</span><span class="o">();</span>

        <span class="n">http</span>
                <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span> <span class="s">"/login/google"</span><span class="o">).</span><span class="na">anonymous</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                <span class="o">.</span><span class="na">addFilterBefore</span><span class="o">(</span><span class="k">new</span> <span class="nc">JwtAuthenticationFilter</span><span class="o">(</span><span class="n">jwtTokenProvider</span><span class="o">),</span> <span class="nc">UsernamePasswordAuthenticationFilter</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Filter를 등록 했으면 Jwt Token을 생성하고, 인증 및 권한 부여 등의 기능을 제공할 <strong>Provider</strong>를 만들어야 한다.</p>

<p><strong>JwtTokenProvider.java</strong> : Jwt Token을 생성, 인증, 권한 부여, 유효성 검사, PK 추출 등의 다양한 기능을 제공하는 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtTokenProvider</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">TOKEN_VALID_MILISECOND</span> <span class="o">=</span> <span class="mi">1000L</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span><span class="o">;</span> <span class="c1">// 10시간</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">"spring.jwt.secret"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">secretKey</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserDetailsService</span> <span class="n">userDetailsService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JwtTokenProvider</span><span class="o">(</span><span class="nd">@Qualifier</span><span class="o">(</span><span class="s">"userUserDetailsService"</span><span class="o">)</span> <span class="nc">UserDetailsService</span> <span class="n">userDetailsService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userDetailsService</span> <span class="o">=</span> <span class="n">userDetailsService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostConstruct</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">secretKey</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encodeToString</span><span class="o">(</span><span class="n">secretKey</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// Jwt 토큰 생성</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">createToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">userPk</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">UserRole</span><span class="o">&gt;</span> <span class="n">roles</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Claims</span> <span class="n">claims</span> <span class="o">=</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">claims</span><span class="o">().</span><span class="na">setSubject</span><span class="o">(</span><span class="n">userPk</span><span class="o">);</span>
        <span class="n">claims</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"roles"</span><span class="o">,</span> <span class="n">roles</span><span class="o">);</span>
        <span class="nc">Date</span> <span class="n">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setClaims</span><span class="o">(</span><span class="n">claims</span><span class="o">)</span> <span class="c1">// 데이터</span>
                <span class="o">.</span><span class="na">setIssuedAt</span><span class="o">(</span><span class="n">now</span><span class="o">)</span>   <span class="c1">// 토큰 발행 일자</span>
                <span class="o">.</span><span class="na">setExpiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="n">now</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">+</span> <span class="no">TOKEN_VALID_MILISECOND</span><span class="o">))</span> <span class="c1">// 만료 기간</span>
                <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="nc">SignatureAlgorithm</span><span class="o">.</span><span class="na">HS512</span><span class="o">,</span> <span class="n">secretKey</span><span class="o">)</span> <span class="c1">// 암호화 알고리즘, secret 값 </span>
                <span class="o">.</span><span class="na">compact</span><span class="o">();</span> <span class="c1">// Token 생성</span>
    <span class="o">}</span>

    <span class="c1">// 인증 성공시 SecurityContextHolder에 저장할 Authentication 객체 생성</span>
    <span class="kd">public</span> <span class="nc">Authentication</span> <span class="nf">getAuthentication</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">UserDetails</span> <span class="n">userDetails</span> <span class="o">=</span> <span class="n">userDetailsService</span><span class="o">.</span><span class="na">loadUserByUsername</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getUserPk</span><span class="o">(</span><span class="n">token</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">userDetails</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="n">userDetails</span><span class="o">.</span><span class="na">getAuthorities</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// Jwt Token에서 User PK 추출</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUserPk</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">parser</span><span class="o">().</span><span class="na">setSigningKey</span><span class="o">(</span><span class="n">secretKey</span><span class="o">)</span>
                <span class="o">.</span><span class="na">parseClaimsJws</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getBody</span><span class="o">().</span><span class="na">getSubject</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">resolveToken</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"X-AUTH-TOKEN"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Jwt Token의 유효성 및 만료 기간 검사</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">validateToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">jwtToken</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Jws</span><span class="o">&lt;</span><span class="nc">Claims</span><span class="o">&gt;</span> <span class="n">claims</span> <span class="o">=</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">parser</span><span class="o">().</span><span class="na">setSigningKey</span><span class="o">(</span><span class="n">secretKey</span><span class="o">).</span><span class="na">parseClaimsJws</span><span class="o">(</span><span class="n">jwtToken</span><span class="o">);</span>
            <span class="k">return</span> <span class="o">!</span><span class="n">claims</span><span class="o">.</span><span class="na">getBody</span><span class="o">().</span><span class="na">getExpiration</span><span class="o">().</span><span class="na">before</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>인증 기능을 수행할 JwtTokenProvider를 만들었으면 JwtTokenProvider가 제공한 사용자 정보로 UserDetails를 제공할 <code class="highlighter-rouge">UserDetailsService</code>를 만들어야 한다.</p>

<p><strong>UserDetailsService.java :</strong> JwtTokenProvider가 제공한 사용자 정보로 DB에서 알맞은 사용자 정보를 가져와 UserDetails 생성</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserUserDetailsService</span> <span class="kd">implements</span> <span class="nc">UserDetailsService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserUserDetailsService</span><span class="o">(</span><span class="nc">UserService</span> <span class="n">userService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userService</span> <span class="o">=</span> <span class="n">userService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">//</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserDetails</span> <span class="nf">loadUserByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">UsernameNotFoundException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userService</span><span class="o">.</span><span class="na">findUserByEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>UserDetailsService까지 만들었으면 UserDetails를 상속받는 <strong>도메인 객체</strong>를 만들고 사용자를 식별할 JwtToken을 생성할 Controller까지 만들면 Production 코드는 끝이다.</p>

<p><strong>(User 클래스와 Controller 클래스의 코드를 첨부하고 싶었으나, 많은 배경지식이 필요한 코드들이 존재해 첨부하지 않았다.)</strong></p>

<p>그렇다면 위의 생성된 코드들을 테스트 할 수 있는 Test Code를 만들면 다음과 같다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleLoginControllerTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@MockBean</span>
    <span class="nc">GoogleLoginService</span> <span class="n">googleLoginService</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="nc">JwtTokenProvider</span> <span class="n">jwtTokenProvider</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">GoogleLoginWithWrongAccessToken</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">// When &amp; Then</span>
        <span class="n">when</span><span class="o">(</span><span class="n">googleLoginService</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="n">eq</span><span class="o">(</span><span class="s">"Wrong_Access_Token"</span><span class="o">)))</span>
                <span class="o">.</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">badRequest</span><span class="o">().</span><span class="na">build</span><span class="o">());</span>

        <span class="c1">// Then</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/login/google"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="s">"{\"access_token\" : \"Wrong_Access_Token\"}"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">print</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isBadRequest</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">GoogleLoginWithRightAccessToken</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">GoogleUserinfoDTO</span> <span class="n">googleUserinfoDTO</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GoogleUserinfoDTO</span><span class="o">();</span>
        <span class="n">googleUserinfoDTO</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"frog"</span><span class="o">);</span>
        <span class="n">googleUserinfoDTO</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">"frog@email.com"</span><span class="o">);</span>
        <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">GoogleUserinfoDTO</span><span class="o">&gt;</span> <span class="n">responseEntity</span> <span class="o">=</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">googleUserinfoDTO</span><span class="o">);</span>

        <span class="c1">// When</span>
        <span class="n">when</span><span class="o">(</span><span class="n">googleLoginService</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="n">eq</span><span class="o">(</span><span class="s">"Right_Access_Token"</span><span class="o">)))</span>
                <span class="o">.</span><span class="na">thenReturn</span><span class="o">(</span><span class="n">responseEntity</span><span class="o">);</span>

        <span class="nc">MvcResult</span> <span class="n">mvcResult</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/login/google"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="s">"{\"access_token\" : \"Right_Access_Token\"}"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">print</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andReturn</span><span class="o">();</span>

        <span class="nc">String</span> <span class="n">contentAsString</span> <span class="o">=</span> <span class="nc">JsonPath</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">mvcResult</span><span class="o">.</span><span class="na">getResponse</span><span class="o">().</span><span class="na">getContentAsString</span><span class="o">(),</span> <span class="s">"$.X-AUTH-TOKEN"</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">getUserPk</span><span class="o">(</span><span class="n">contentAsString</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"frog@email.com"</span><span class="o">);</span>

        <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"X-AUTH-TOKEN"</span><span class="o">,</span><span class="n">contentAsString</span><span class="o">))</span>
        <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">print</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>이를 돌려보면 적절한 Jwt Token으로 인증을 완료하고 SecurityContextHolder에서 알맞는 사용자의 <strong>Principal</strong>을 가져오는 걸 볼 수 있다.</p>

<p><img src="/assets/spring/Spring-Security-With-JWT-3.png" style="width:100%" /></p>

<p>글이 아주 길고 장황해 독자들이 이를 읽고 얼마나 많은 도움이 될려는 지는 모르겠지만, Spring Security 아키텍처 부터 프로젝트 적용까지 한 포스팅으로 전부 설명한다는 것이 정말 쉽지 않은 일이었던 것 같고 아주 좋은 경험인 것 같다.</p>

<p>또한 나의 지식이 늘어감에 또는 나의 프로젝트가 더 커짐에 따라서 이 글을 지속적으로 업데이트 한다는 다짐을 끝으로 글을 마치도록 하겠다.</p>

<hr />

<p>참고한 사이트</p>

<ul>
  <li><a href="https://docs.spring.io/spring-security/site/docs/5.3.3.BUILD-SNAPSHOT/reference/html5/">https://docs.spring.io/spring-security/site/docs/5.3.3.BUILD-SNAPSHOT/reference/html5/</a></li>
  <li><a href="https://daddyprogrammer.org/post/636/springboot2-springsecurity-authentication-authorization/">https://daddyprogrammer.org/post/636/springboot2-springsecurity-authentication-authorization/</a></li>
  <li><a href="https://jeong-pro.tistory.com/205">https://jeong-pro.tistory.com/205</a></li>
  <li><a href="https://www.baeldung.com/spring-security-custom-filter">https://www.baeldung.com/spring-security-custom-filter</a></li>
</ul>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/Spring">Spring</a>,&nbsp;<a href="/tag/Security">Security</a>,&nbsp;<a href="/tag/JWT">JWT</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Spring+Security+%2B+JWT%EB%A5%BC+%ED%86%B5%ED%95%B4+%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90+%EC%9D%B8%EC%A6%9D+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F06%2F29%2FSpring-Security-with-JWT.html&via=TheBenCentra"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=Spring+Security+%2B+JWT%EB%A5%BC+%ED%86%B5%ED%95%B4+%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90+%EC%9D%B8%EC%A6%9D+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0&u=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F06%2F29%2FSpring-Security-with-JWT.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F06%2F29%2FSpring-Security-with-JWT.html"
        onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
    
    
    
    
      <a href="//plus.google.com/share?title=Spring+Security+%2B+JWT%EB%A5%BC+%ED%86%B5%ED%95%B4+%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90+%EC%9D%B8%EC%A6%9D+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F06%2F29%2FSpring-Security-with-JWT.html"
        onclick="window.open(this.href, 'google-plus-share', 'width=550,height=255');return false;">
        <i class="fa fa-google-plus-square fa-lg"></i>
      </a>
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=Spring+Security+%2B+JWT%EB%A5%BC+%ED%86%B5%ED%95%B4+%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90+%EC%9D%B8%EC%A6%9D+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F06%2F29%2FSpring-Security-with-JWT.html&media=http://localhost:4000/assets/header_image.jpg"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('http://localhost:4000/spring/2020/06/29/Spring-Security-with-JWT.html') + '&title=Spring Security + JWT를 통해 프로젝트에 인증 구현하기'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Green Frog Developer</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	
	<li class="nav-link"><a href="/typography/">Typography</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:qowhdwlsdk@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">qowhdwlsdk@gmail.com</span>
          </a>
        </li>

        
          
        
          
          <li>
            <a href="https://www.facebook.com/profile.php?id=100046067473526" title="Friend me on Facebook">
              <i class="fa fa-facebook"></i>
              <span class="username">배종진</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/imbf" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">imbf</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">오늘보다 나은 내일을 위해 변화를 꿈꾸는 개발자입니다.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>






  </body>

</html>
