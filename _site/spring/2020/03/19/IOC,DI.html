<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="B7c_ecRqLF3-nPb0TKaSDlu3xHPQXRZkwl-UcutOMgo" />


  <title>IoC(Inversion Of Control) / DI(Dependency Injection)</title>
  <meta name="description" content="이 글에서는 Spring이 사용하고 있는 IoC(Inversion of Control)와 DI(Dependency Injection)에 대해서 알아볼 것이다.">
  
  <meta name="author" content="배종진">
  <meta name="copyright" content="&copy; 배종진 2020">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="이 글에서는 Spring이 사용하고 있는 IoC(Inversion of Control)와 DI(Dependency Injection)에 대해서 알아볼 것이다." />
  <meta property="og:url" content="http://localhost:4000/spring/2020/03/19/IOC,DI.html">
  <meta property="og:site_name" content="Green Frog Developer" />
  <meta property="og:title" content="IoC(Inversion Of Control) / DI(Dependency Injection)" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="IoC(Inversion Of Control) / DI(Dependency Injection)">
  <meta name="twitter:description" content="이 글에서는 Spring이 사용하고 있는 IoC(Inversion of Control)와 DI(Dependency Injection)에 대해서 알아볼 것이다.">
  <meta name="twitter:image" content="http://localhost:4000/assets/logo.png">
  <meta name="twitter:url" content="http://localhost:4000/spring/2020/03/19/IOC,DI.html">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/spring/2020/03/19/IOC,DI.html">
	<link rel="alternate" type="application/rss+xml" title="Green Frog Developer" href="http://localhost:4000/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Green Frog Developer">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	
	<li class="nav-link"><a href="/typography/">Typography</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">IoC(Inversion Of Control) / DI(Dependency Injection)</h1>
      <p class="info">by <strong>Green Frog Developer</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">March 19, 2020</div>
  <div class="post-categories">
  in 
    
    <!-- <a href="/category/Spring">Spring</a> (default) -->
    <a href="/category/Spring">Spring</a>
    
  
  </div>
</section>

<article class="post-content">
  <p>이 글에서는 Spring이 사용하고 있는 <strong>IoC(Inversion of Control)와 DI(Dependency Injection)</strong>에 대해서 알아볼 것이다.</p>

<p>IoC/DI에 대해 알아보기 전에 자바에서의 <strong>의존성</strong>이란 무엇을 의미하는지에 대해서 먼저 알아보자.</p>

<hr />

<h2 id="프로그래밍에서-의존성이란">프로그래밍에서 의존성이란?</h2>

<hr />

<p><u>자동차와 타이어</u>를 예로들어 의존성에 대해서 설명하겠다.</p>

<p><strong>의사 코드</strong></p>
<ul>
  <li>운전자(Driver)가 자동차(Car)를 생산한다.</li>
  <li>자동차(Car)는 내부적으로 타이어(Tire : 다양한 종류중 하나의 타이어)를 생산한다.</li>
</ul>

<p><strong>자바로 표현</strong></p>
<ul>
  <li>new Car();  (Driver 클래스 내부)</li>
  <li>Car 객체 생성자에서 new KoreaTire();   <strong>(의존 관계가 일어나고 있는 부분)</strong></li>
</ul>

<p><strong>의존성을 단순하게 정의하면 다음과 같다.</strong></p>
<ul>
  <li><strong>의존성은 new이다.</strong></li>
  <li>new를 실행하는 Car와 KoreaTire사이에 <u>Car가 KoreaTire에 의존한다.</u></li>
</ul>

<p><strong>결론적으로 전체가 부분에 의존한다고 표현할 수 있다.</strong>(더 깊이 들어가면 집합과 구성 관계로 구분할 수 있다.)</p>

<p>이러한 요구사항을 먼저 스프링을 적용하지 않은 기존 방식으로 자바 코드를 작성해 보고, 점진적으로 스프링 Annotation 방식으로 변경해 보자.</p>

<hr />

<h2 id="스프링-없이-의존성-주입하기">스프링 없이 의존성 주입하기</h2>

<hr />

<h3 id="1-생성자를-통한-의존성-주입">1. 생성자를 통한 의존성 주입</h3>

<p><strong>의사 코드</strong></p>
<ul>
  <li>운전자가 타이어(다양한 종류중 하나)를 생산한다.</li>
  <li>운전자가 자동차를 생산하면서 타이어를 장착한다.</li>
</ul>

<p><strong>자바로 표현 - 생성자 인자 이용</strong></p>
<ul>
  <li>Tire americaTire = new AmericaTire();</li>
  <li>Car car = new Car(americaTire);</li>
</ul>

<p>기존 코드에서는 Car의 생성자에서 구체적으로 어떤 Tire를 생산할지를 결정했었다.
즉, Tire가 KoreaTire나 AmericaTire 또는 JapanTire로 바뀔 때마다 Car 생성자의 코드를 바꿔줘야 하기 때문에 개발자들은 유지보수하기 되게 힘들어진다.
그래서 이러한 코드를 <u>유연성이 떨어지는 코드</u>라고 부른다.</p>

<p>변경된 코드에서는 운전자가 직접 AmericaTire를 생산해서 자동차에 장착하게 만들기 때문에 Car의 생성자는 어떤 타이어를 장착할까를 더는 고민하지 않아도 된다.
<u>코드의 유연성이 늘어난다.</u></p>

<p><strong>즉, Tire 인터페이스를 상속한 클래스의 의존성을 주입하면 나중에 어떤 새로운 타이어 브랜드가 생겨도 각 타이어 브랜드들이 Tire 인터페이스를 구현한다면 Car.java 코드를 변경할 필요 없이 사용할 수 있기 때문에 코드의 확장성과 유지보수성이 좋아진다.</strong></p>

<h3 id="2-속성을-통한-의존성-주입">2. 속성을 통한 의존성 주입</h3>

<p><strong>의사코드</strong></p>
<ul>
  <li>운전자가 타이어를 생산한다.</li>
  <li>운전자가 자동차를 생산한다.</li>
  <li>운전자가 자동차에 타이어를 장착한다.</li>
</ul>

<p><strong>자바로 표현 - 속성 접근자 메서드 사용</strong></p>
<ul>
  <li>Tire koreatire = new KoreaTire();</li>
  <li>Car car = new Car();</li>
  <li>car.setTire(koreatire);</li>
</ul>

<p>위에서 볼 수 있듯이 이번에는 <strong>속성을 통해서 의존성을 주입</strong>해 보았다. 이러한 방법을 사용하게 되면 운전자가 원할 때 Car의 Tire를 교체할 수 있게되기 때문에 코드가 현실세계에 좀 더 가까워 진다.</p>

<blockquote>
  <p>프로그래밍 세계에서는 생성자를 통해 의존성을 주입하는 방법과 속성을 통해 의존성을 주입하는 방법 중 어느 쪽이 더 좋은가에 대한 의견이 분분했었는데, <strong>최근에는 속성을 통한 의존성 주입보다는 생성자를 통한 의존성 주입을 선호하는 사람이 더 많다.</strong> 실세계에서라면 십년 가까이 타게 되는 차를 사고 타이어를 교체하는 일이 빈번할 수 있지만 프로그램에서는 한번 주입된 의존성을 계속 사용하는 경우가 더 일반적이기 때문이다.</p>
</blockquote>

<hr />

<h2 id="스프링을-통한-의존성-주입">스프링을 통한 의존성 주입</h2>

<hr />

<h3 id="1-스프링-설정-파일xml-사용">1. 스프링 설정 파일(XML) 사용</h3>

<p><strong>의사 코드</strong> (종합 쇼핑몰의 역할은 Spring Framework이다.)</p>
<ul>
  <li>종합 쇼핑몰에 타이어와 자동차를 입점시킨다.</li>
  <li>운전자가 종합 쇼핑몰에서 타이어를 구매한다.</li>
  <li>운전자가 종합 쇼핑몰에서 자동차를 구매한다.</li>
  <li>운전자가 자동차에 타이어를 장착한다.</li>
</ul>

<p><strong>자바로 표현 - 속성 메서드 사용</strong></p>
<ul>
  <li>ApplicationContext context = new ClassPathXmlApplicationContext(“expert002.xml”, Driver.class);</li>
  <li>Tire tire = (Tire)context.getBean(“tire”);</li>
  <li>Car car = (Car)context.getBean(“car”);</li>
  <li>car.setTire(tire);</li>
</ul>

<p>Spring을 도입하면 이전 코드에서 <code class="highlighter-rouge">Driver</code> 클래스만 바뀌고 스프링 설정 파일(XML)만 추가되는 것이지 사실 Spring을 사용하지 않을때와 거의 비슷하다.</p>

<p>스프링을 사용한 후 변경된 시퀀스 다이어그램에 대해서 살펴보자.</p>

<p><img src="/assets/spring/Spring-Sequence-Diagram-1.jpg" style="width:80%" /></p>

<p>기존 다이어그램과 비교해서 달라진 곳은 종합 쇼핑몰(Spring Framework)가 들어온 것 외에는 달라진 부분이 없다.
운전자가 타이어, 자동차를 직접 생산하던 시스템에서 종합 쇼핑몰을 통해 구매하는 형태로 바뀌었다. <strong>즉, 현실세계와 더욱 유사해졌다.</strong></p>

<p>Driver 클래스 내부의 코드를 살펴보자.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">expert001_01</span><span class="o">;</span>

<span class="c1">// 종합 쇼핑몰(Spring Framework)에 대한 정보를 가지고 있는 패키지</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 종합 쇼핑몰에 대한 정보</span>
        <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"expert001.xml"</span><span class="o">);</span>
        
        <span class="c1">// 종합 쇼핑몰에서 상품에 해당하는 Car 구매</span>
        <span class="nc">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"car"</span><span class="o">,</span><span class="nc">Car</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 

        <span class="c1">// 종합 쇼핑몰에서 상품에 해당하는 Tire 구매</span>
        <span class="nc">Tire</span> <span class="n">tire</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"tire"</span><span class="o">,</span> <span class="nc">Tire</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 

        <span class="c1">//운전자가 자동차에 타이어를 장착</span>
        <span class="n">car</span><span class="o">.</span><span class="na">setTire</span><span class="o">(</span><span class="n">tire</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">car</span><span class="o">.</span><span class="na">getTireBrand</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>그리고 한 가지 더 필요한 것이 있다. 아무리 종합 쇼핑몰(Spring Framework)이라고 하지만 상품(Bean)이 입점돼 있어야만 판매할 수 있을 것이다. <u>입점된 상품에 대한 정보는 `ClassPathXmlApplicationContext` 클래스 생성자의 인자로써 주어진 xml 파일(expert001.xml)에 저장되어 있다.</u></p>

<p><strong>&lt;종합 쇼핑몰(Spring Framework) 판매 목록(Bean)등록하기 위한 XML 파일&gt;</strong></p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"tire"</span> <span class="na">class=</span><span class="s">"expert001_01.KoreaTire"</span> <span class="nt">&gt;&lt;/bean&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"americaTire"</span> <span class="na">class=</span><span class="s">"expert001_01.AmericaTire"</span><span class="nt">&gt;&lt;/bean&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car"</span> <span class="na">class=</span><span class="s">"expert001_01.Car"</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>위의 예제에서는 3개의 상품(Bean)을 등록했다. <strong>상품을 등록할 때는 bean 태그를 이용해 등록한다. 이 때 각 상품을 구분하기 위한 id 속성과 그 상품을 어떤 클래스를 통해 생산(인스턴스화)해야 할지 나타내는 class 속성을 함께 지정하면 된다.</strong></p>

<p>각 상품을 만들어서 종합쇼핑몰(Spring Framework)에 등록해서 사용하는 순간까지를 선긋기로써 표현한 그림은 다음과 같다.</p>

<p><img src="/assets/spring/Spring-Line-Diagram.jpg" style="width:80%" /></p>

<p><code class="highlighter-rouge">KoreaTire.java</code>가 XML 파일에서 <code class="highlighter-rouge">id=tire</code>인 bean 태그와 연결돼 있고, 다시 <code class="highlighter-rouge">Driver.java</code>의 <code class="highlighter-rouge">main()</code> 메서드 안의 코드인 <code class="highlighter-rouge">context.getBean("tire", Tire.class)</code>와 연결돼 있는 것을 볼 수 있다.</p>

<p><strong>즉, KoreaTire라고 하는 상품이 tire라는 이름으로 진열돼 있고, 구매(getBean)할 수 있다.</strong></p>

<p>위의 설명들을 참고해서 스프링을 도입해서 얻을 수 있는 가장 큰 이득에 대해서 생각해보자.</p>

<h4 id="스프링을-도입해서-얻을-수-있는-가장-큰-이득을-꼽으라면-자동차의-타이어-브랜드를-변경할-때-그-무엇도-재컴파일재배포하지-않아도-xml-파일만-수정하면-프로그램의-실행결과를-바꿀-수-있다는-것이다"><strong>스프링을 도입해서 얻을 수 있는 가장 큰 이득을 꼽으라면 자동차의 타이어 브랜드를 변경할 때 그 무엇도 재컴파일/재배포하지 않아도 XML 파일만 수정하면 프로그램의 실행결과를 바꿀 수 있다는 것이다.</strong></h4>

<p><code class="highlighter-rouge">Driver.java</code>의 <code class="highlighter-rouge">Tire tire = context.getBean("tire", Tire.class);</code> 부분이 타이어를 구매하는 부분인데, 자바 코드 어디에서도 <code class="highlighter-rouge">KoreaTire</code> 클래스나 <code class="highlighter-rouge">AmericaTire</code> 클래스를 지칭하는 부분이 없다. 바로 <code class="highlighter-rouge">expert001.xml</code>에 이에 해당하는 내용이 있기 때문이다. 즉, <code class="highlighter-rouge">expert001.xml</code>에서 해당하는 부분의 class를 변경하면 재컴파일/재배포하지 않아도 프로그램의 실행결과를 바꿀 수 있다. <strong>실로 엄청난 것이다!!</strong></p>

<h3 id="2-스프링-설정-파일xml에서-속성-주입">2. 스프링 설정 파일(XML)에서 속성 주입</h3>

<p><strong>의사 코드 - 점점 더 현실 세계를 닮아가고 있다.</strong></p>
<ul>
  <li>운전자가 종합 쇼핑몰에서 자동차를 구매 요청한다. (Driver)</li>
  <li>종합 쇼핑몰은 자동차를 생산한다. (XML)</li>
  <li>종합 쇼핑몰은 타이어를 생산한다. (XML)</li>
  <li>종합 쇼핑몰은 자동차에 타이어를 장착한다. (XML)</li>
  <li>종합 쇼핑몰은 운전자에게 자동차를 전달한다. (Spring Framework)</li>
</ul>

<p><strong>자바로 표현</strong></p>
<ul>
  <li>ApplicationContext context = new ClassPathXmlApplicationContext(“expert001.xml”);</li>
  <li>Car car = context.getBean(“car”, Car.class);</li>
</ul>

<p><strong>XML로 표현</strong></p>
<ul>
  <li>&lt;bean id=”koreaTire” class=”expert001.KoreaTire”&gt;&lt;/bean&gt;</li>
  <li>&lt;bean id=”americaTire” class=”expert001.AmericaTire”&gt;&lt;/bean&gt;</li>
  <li>&lt;bean id=”car” class=”expert001.Car”&gt;&lt;property name=”title” ref=”koreaTire”&gt;&lt;/property&gt;&lt;/bean&gt;</li>
</ul>

<p>XML 파일에서 property는 <code class="highlighter-rouge">Driver.java</code>에서 <code class="highlighter-rouge">car.setTire(tire);</code>라고 하던 부분을 <strong>XML 파일의 property 태그를 이용해 대체</strong>하는 것이다.</p>

<p>설계가 변경된 <code class="highlighter-rouge">Driver.java</code>클래스의 코드를 참고해 보자.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">expert001</span><span class="o">;</span>

<span class="c1">// 종합 쇼핑몰(Spring Framework)에 대한 정보를 가지고 있는 패키지</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 종합 쇼핑몰에 대한 상품 입점</span>
        <span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"expert001.xml"</span><span class="o">);</span>

        <span class="c1">// 종합 쇼핑몰에서 상품에 해당하는 Car 구매</span>
        <span class="nc">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"car"</span><span class="o">,</span><span class="nc">Car</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">car</span><span class="o">.</span><span class="na">getTireBrand</span><span class="o">());</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>스프링 설정 파일(XML)은 다음과 같다.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"koreaTire"</span> <span class="na">class=</span><span class="s">"expert001.KoreaTire"</span> <span class="nt">&gt;&lt;/bean&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"americaTire"</span> <span class="na">class=</span><span class="s">"expert001.AmericaTire"</span><span class="nt">&gt;&lt;/bean&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car"</span> <span class="na">class=</span><span class="s">"expert001.Car"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"tire"</span> <span class="na">ref=</span><span class="s">"koreaTire"</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>위 코드를 기반으로 줄긋기 그림으로 표시하면 다음과 같다.</p>

<p><img src="/assets/spring/Spring-Line-Diagram2.jpg" style="width:80%" /></p>

<p>1번 선(주황색)은 코드에서 Car를 구매하는 부분이므로 자바 코드 파일에 그대로 남겨둬야 한다. Tire tire와 id가 koreaTire인 Bean 태그를 잇는 2번 선(초록색)은 타이어를 구매하는 부분이다. <strong>id=”koreaTire”와 ref=”koreaTire”를 잇는 내부의 3번 선(파란색)은 코리아 타이어를 자동차의 타이어 속성에 결합하는 부분이다.<code class="highlighter-rouge">car.setTire(tire)</code> 메서드와 <code class="highlighter-rouge">property</code> 태그를 잇는 4번 선(빨강색)은 car의 tire속성을 설정하는 부분이다.</strong></p>

<p>JUnit 테스트 케이스는 다음과 같다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">expert001.Car</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.ContextConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="s">"expert001.xml"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">Car</span> <span class="n">car</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">자동차_코리아타이어_장착_타이어브랜드_테스트</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="s">"장착된 타이어: 코리아 타이어"</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">car</span><span class="o">.</span><span class="na">getTireBrand</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="3-autowired를-통한-속성-주입">3. @Autowired를 통한 속성 주입</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>

<span class="nd">@Autowired</span>
<span class="nc">Tire</span> <span class="n">tire</span><span class="o">;</span>
</code></pre></div></div>

<p><strong>import문 하나와 @Autowired 애노테이션을 이용하면 설정자 메서드(setter, property태그)를 이용하지 않고도 종합쇼핑몰인 스프링 프레임워크가 설정 파일을 통해서 메서드 대신 속성을 주입해준다.</strong></p>

<p>변경된 스프링 설정 파일은 다음과 같다.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
http://www.springframework.org/schema/context http://www.springframework/schema/context/spring-context-3.1.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;context:annotation-config/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"tire"</span> <span class="na">class=</span><span class="s">"expert001.KoreaTire"</span><span class="nt">&gt;&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"americaTire"</span> <span class="na">class=</span><span class="s">"expert001.AmericaTire"</span><span class="nt">&gt;&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"car"</span> <span class="na">class=</span><span class="s">"expert001.Car"</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>
<p>id가 car인 bean의 내부 property태그는 @Autowired를 통해 car의 property를 자동으로 엮어줄 수 있으므로 생략이 되었다.</p>

<p><strong>@Autowired의 의미는 스프링 설정 파일을 보고 자동으로 속성의 설정자 메서드(Setter, Property태그)에 해당하는 역할을 해주겠다는 의미이다.</strong>
<strong><u>스프링의 @Autowired는 id 매칭보다 type 매칭이 우선이다.</u> 따라서 같은 타입을 구현한 클래스가 여러 개 있다면 그때 bean 태그의 id로 구분해서 매칭하게 되는 것이다.</strong>
<strong>하지만 id로 구분해서 매칭하는 것 보다 type로 구분해서 매칭하는 것이 개발자의 유지보수들의 더 어렵게 하기 때문에 항상 bean 태그의 id속성을 작성하는 습관을 들이자.</strong></p>

<p>변경된 Car 클래스는 다음과 같다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">expert001</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">Tire</span> <span class="n">tire</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getTireBrand</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"장착된 타이어: "</span> <span class="o">+</span> <span class="n">tire</span><span class="o">.</span><span class="na">getBrand</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="4-resource를-통한-속성-주입">4. @Resource를 통한 속성 주입</h3>

<p><strong>의사 코드</strong></p>
<ul>
  <li>운전자가 종합 쇼핑몰에서 자동차를 구매 요청한다.</li>
  <li>종합 쇼핑몰은 자동차를 생산한다.</li>
  <li>종합 쇼핑몰은 타이어를 생산한다.</li>
  <li>종합 쇼핑몰은 자동차에 타이어를 장착한다.</li>
  <li>종합 쇼핑몰은 운전자에게 자동차를 전달한다.</li>
</ul>

<p>@Autowired를 @Resource로 바꾸면 변경된 Car 클래스는 다음과 같다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">expert001</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.annotation.Resource</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>

    <span class="nd">@Resource</span>
    <span class="nc">Tire</span> <span class="n">tire</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getTireBrand</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"장착된 타이어: "</span> <span class="o">+</span> <span class="n">tire</span><span class="o">.</span><span class="na">getBrand</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>위 예제에서는 정말 @Autowired를 @Resource로 바뀐것 밖에 없다. 그렇다면 왜 @Autowired를 붙이면 될 것을 @Resource로 바꾸었는가?</p>

<p><strong>@Autowired는 스프링 어노테이션이고 @Resource는 자바 어노테이션이다.</strong> 스프링 프레임워크를 사용하지 않는다면 @Autowired는 사용할 수 없고 @Resource만을 사용해야 한다.
그리고 <strong>@Autowired의 경우 type과 id가운데 매칭 우선순위는 type이 높다. @Resource의 경우 type과 id가운데 매칭 우선순위는 id가 높다.</strong>  즉, @Resource의 경우 id로 매칭할 Bean을 찾지 못한 경우 type으로 매칭할 Bean을 찾게 된다.</p>

<hr />

<blockquote>
  <p>참조 : 스프링 입문을 위한 자바 객체 지향의 원리와 이해(저자: 김종민)</p>
</blockquote>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/Java">Java</a>,&nbsp;<a href="/tag/OOP">OOP</a>,&nbsp;<a href="/tag/Spring">Spring</a>,&nbsp;<a href="/tag/IOC">IOC</a>,&nbsp;<a href="/tag/DI">DI</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=IoC%28Inversion+Of+Control%29+%2F+DI%28Dependency+Injection%29&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F03%2F19%2FIOC%2CDI.html&via=TheBenCentra"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=IoC%28Inversion+Of+Control%29+%2F+DI%28Dependency+Injection%29&u=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F03%2F19%2FIOC%2CDI.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F03%2F19%2FIOC%2CDI.html"
        onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
    
    
    
    
      <a href="//plus.google.com/share?title=IoC%28Inversion+Of+Control%29+%2F+DI%28Dependency+Injection%29&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F03%2F19%2FIOC%2CDI.html"
        onclick="window.open(this.href, 'google-plus-share', 'width=550,height=255');return false;">
        <i class="fa fa-google-plus-square fa-lg"></i>
      </a>
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=IoC%28Inversion+Of+Control%29+%2F+DI%28Dependency+Injection%29&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2020%2F03%2F19%2FIOC%2CDI.html&media=http://localhost:4000/assets/header_image.jpg"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('http://localhost:4000/spring/2020/03/19/IOC,DI.html') + '&title=IoC(Inversion Of Control) / DI(Dependency Injection)'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Green Frog Developer</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	
	<li class="nav-link"><a href="/typography/">Typography</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:qowhdwlsdk@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">qowhdwlsdk@gmail.com</span>
          </a>
        </li>

        
          
        
          
          <li>
            <a href="https://www.facebook.com/profile.php?id=100046067473526" title="Friend me on Facebook">
              <i class="fa fa-facebook"></i>
              <span class="username">배종진</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/imbf" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">imbf</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">오늘보다 나은 내일을 위해 변화를 꿈꾸는 개발자입니다.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>






  </body>

</html>
